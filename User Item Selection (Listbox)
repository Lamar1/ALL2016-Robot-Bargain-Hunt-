con1 = sql.connect('ITEM DATABASE.sqlite')
cur1 = con1.cursor()
cur1.execute(''' SELECT product FROM items;''')
global ItemList5
ItemList5 = []

def DoubleClick(event):
    widget = event.widget
    selection=widget.curselection()
    #value is = to the item last clicked by user
    value = widget.get(selection[0])
    #Stores value into _list2
    #_list2 is all items retrievable by robot
    global _list2
    _list2 = []
    _list2.append(value)
    print(value,"was added to search items")

for row in cur1:
    ItemList5.append(row)
global list1
list1 = [val for sublist in ItemList5 for val in sublist]


_listbox = Listbox(root)
for product in list1:
    _listbox.insert(-1,product)
#Binds an event to Double Click on Left mouse button
#Event is doubleclick function
_listbox.bind("<Double-Button-1>", DoubleClick)
_listbox.pack(side="top", fill="both", expand=True)
#retrieves the cursors selection after a double click

def items():
    try:
        con = sql.connect('ITEM DATABASE.sqlite')
        cur = con.cursor()
        cur.execute(''' SELECT product FROM items;''')
        ItemList5 = []

        for row in cur:
            ItemList5.append(row)
            
        global list1
        list1 = [val for sublist in ItemList5 for val in sublist]

    finally:
            con.close()
if __name__ == "__main__":
    items()
    root.mainloop()
